<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<style>
* {
    margin: 0;
    padding: 0;
}

ul {
    list-style: none;
}

a {
    text-decoration: none;
    color: #333;
}

.m_menu{
  width: 200px;
  margin: 20px auto;
  text-align: center;
}

.m_menu > li > a{
  display: block;
  height: 36px;
  background-color: #390;
  line-height: 36px;
  border-top: 1px dotted #fff;
  color: #fff;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.m_menu > li > a:hover{
  background-color: #2a7a00;
}

.m_menu .sub{
  height: 0;
  overflow: hidden;
  opacity: 0;
  transition: height 0.4s ease, opacity 0.3s ease;
}

.m_menu .sub li{
  background-color: #cf9;
}

.m_menu .sub li a{
  height: 36px;
  line-height: 36px;
  color: #222;
  transition: background-color 0.2s ease;
}

.m_menu .sub li a:hover{
  background-color: #cf09;
}

</style>
</head>
<body>
  <ul class="m_menu">
    <li>
      <a href="#">회사소개</a>
      <ul class="sub">
        <li><a href="#">submenu1</a></li>
        <li><a href="#">submenu2</a></li>
        <li><a href="#">submenu3</a></li>
      </ul>
    </li>
    <li>
      <a href="#">제품소개</a>
      <ul class="sub">
        <li><a href="#">submenu1</a></li>
        <li><a href="#">submenu2</a></li>
        <li><a href="#">submenu3</a></li>
      </ul>
    </li>
    <li>
      <a href="#">커뮤니티</a>
      <ul class="sub">
        <li><a href="#">submenu1</a></li>
        <li><a href="#">submenu2</a></li>
        <li><a href="#">submenu3</a></li>
      </ul>
    </li>
    <li>
      <a href="#">다운로드</a>
      <ul class="sub">
        <li><a href="#">submenu1</a></li>
        <li><a href="#">submenu2</a></li>
        <li><a href="#">submenu3</a></li>
      </ul>
    </li>
  </ul>
<script>
  // DOM이 로드된 후 실행
    document.addEventListener('DOMContentLoaded', function () {
      // 모든 메인 메뉴 링크 선택
      const mainMenuLinks = document.querySelectorAll('.m_menu > li > a');

      // 각 메인 메뉴에 클릭 이벤트 추가
      mainMenuLinks.forEach(function (link) {
        link.addEventListener('click', function (e) {
          e.preventDefault(); // 기본 링크 동작 방지

          // 클릭한 메뉴의 부모 li 요소
          const parentLi = this.parentElement;
          // 해당 li 안의 서브메뉴 (.sub)
          const subMenu = parentLi.querySelector('.sub'); //ul

          // 서브메뉴가 있는 경우에만 토글
          if (subMenu) {
            // 다른 서브메뉴들 닫기
            document.querySelectorAll('.m_menu .sub').forEach(function (sub) {
              if (sub !== subMenu && sub.style.height !== '0px') {
                // 현재 높이 저장
                sub.style.height = sub.scrollHeight + 'px';
                // 리플로우 강제
                //sub.offsetHeight; //재계산 안하면 - 움직임이 부자연스러워짐 또는 건너뜀
                // 0으로 애니메이션
                sub.style.height = '0px';
                sub.style.opacity = '0';
              }
            });

            // 현재 서브메뉴 토글
            if (subMenu.style.height === '0px' || subMenu.style.height === '') {
              // 열기: 실제 높이 계산
              subMenu.style.height = '0px';
              subMenu.style.opacity = '0';
              // 리플로우 강제
              subMenu.offsetHeight;
              // 실제 높이로 애니메이션
              const height = subMenu.scrollHeight; //108
              subMenu.style.height = height + 'px';
              subMenu.style.opacity = '1';
            } else {
              // 닫기: 현재 높이에서 0으로
              subMenu.style.height = subMenu.scrollHeight + 'px';
              subMenu.offsetHeight; // 리플로우 강제
              subMenu.style.height = '0px';
              subMenu.style.opacity = '0';
            }
          }
        });
      });
    });

</script>
</body>
</html>